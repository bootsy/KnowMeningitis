+function(e,t,$){"use strict";t.spiedEventsKey=function(e,t){return[$(e).selector,t].toString()},t.getFixtures=function(){return t.currentFixtures_=t.currentFixtures_||new t.Fixtures},t.getStyleFixtures=function(){return t.currentStyleFixtures_=t.currentStyleFixtures_||new t.StyleFixtures},t.Fixtures=function(){this.containerId="jasmine-fixtures",this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures"},t.Fixtures.prototype.set=function(e){return this.cleanUp(),this.createContainer_(e)},t.Fixtures.prototype.appendSet=function(e){this.addToContainer_(e)},t.Fixtures.prototype.preload=function(){this.read.apply(this,arguments)},t.Fixtures.prototype.load=function(){this.cleanUp(),this.createContainer_(this.read.apply(this,arguments))},t.Fixtures.prototype.appendLoad=function(){this.addToContainer_(this.read.apply(this,arguments))},t.Fixtures.prototype.read=function(){for(var e=[],t=arguments,r=t.length,n=0;n<r;n++)e.push(this.getFixtureHtml_(t[n]));return e.join("")},t.Fixtures.prototype.clearCache=function(){this.fixturesCache_={}},t.Fixtures.prototype.cleanUp=function(){$("#"+this.containerId).remove()},t.Fixtures.prototype.sandbox=function(e){var t=e||{};return $('<div id="sandbox" />').attr(t)},t.Fixtures.prototype.createContainer_=function(e){var t=$("<div>").attr("id",this.containerId).html(e);return $(document.body).append(t),t},t.Fixtures.prototype.addToContainer_=function(e){$(document.body).find("#"+this.containerId).append(e).length||this.createContainer_(e)},t.Fixtures.prototype.getFixtureHtml_=function(e){return void 0===this.fixturesCache_[e]&&this.loadFixtureIntoCache_(e),this.fixturesCache_[e]},t.Fixtures.prototype.loadFixtureIntoCache_=function(e){var t=this,r=this.makeFixtureUrl_(e),n="",o=$.ajax({async:!1,cache:!1,url:r,success:function(e,t,r){n=r.responseText}}).fail(function(){throw new Error("Fixture could not be loaded: "+r+" (status: "+status+", message: "+errorThrown.message+")")});($($.parseHTML(n,!0)).find("script[src]")||[]).each(function(){$.ajax({async:!1,cache:!1,dataType:"script",url:$(this).attr("src"),success:function(e,t,r){n+="<script>"+r.responseText+"</script>"},error:function(e,t,r){throw new Error("Script could not be loaded: "+scriptSrc+" (status: "+t+", message: "+r.message+")")}})}),t.fixturesCache_[e]=n},t.Fixtures.prototype.makeFixtureUrl_=function(e){return this.fixturesPath.match("/$")?this.fixturesPath+e:this.fixturesPath+"/"+e},t.Fixtures.prototype.proxyCallTo_=function(e,t){return this[e].apply(this,t)},t.StyleFixtures=function(){this.fixturesCache_={},this.fixturesNodes_=[],this.fixturesPath="spec/javascripts/fixtures"},t.StyleFixtures.prototype.set=function(e){this.cleanUp(),this.createStyle_(e)},t.StyleFixtures.prototype.appendSet=function(e){this.createStyle_(e)},t.StyleFixtures.prototype.preload=function(){this.read_.apply(this,arguments)},t.StyleFixtures.prototype.load=function(){this.cleanUp(),this.createStyle_(this.read_.apply(this,arguments))},t.StyleFixtures.prototype.appendLoad=function(){this.createStyle_(this.read_.apply(this,arguments))},t.StyleFixtures.prototype.cleanUp=function(){for(;this.fixturesNodes_.length;)this.fixturesNodes_.pop().remove()},t.StyleFixtures.prototype.createStyle_=function(e){var t=$("<div></div>").html(e).text(),r=$("<style>"+t+"</style>");this.fixturesNodes_.push(r),$("head").append(r)},t.StyleFixtures.prototype.clearCache=t.Fixtures.prototype.clearCache,t.StyleFixtures.prototype.read_=t.Fixtures.prototype.read,t.StyleFixtures.prototype.getFixtureHtml_=t.Fixtures.prototype.getFixtureHtml_,t.StyleFixtures.prototype.loadFixtureIntoCache_=t.Fixtures.prototype.loadFixtureIntoCache_,t.StyleFixtures.prototype.makeFixtureUrl_=t.Fixtures.prototype.makeFixtureUrl_,t.StyleFixtures.prototype.proxyCallTo_=t.Fixtures.prototype.proxyCallTo_,t.getJSONFixtures=function(){return t.currentJSONFixtures_=t.currentJSONFixtures_||new t.JSONFixtures},t.JSONFixtures=function(){this.fixturesCache_={},this.fixturesPath="spec/javascripts/fixtures/json"},t.JSONFixtures.prototype.load=function(){return this.read.apply(this,arguments),this.fixturesCache_},t.JSONFixtures.prototype.read=function(){for(var e=arguments,t=e.length,r=0;r<t;r++)this.getFixtureData_(e[r]);return this.fixturesCache_},t.JSONFixtures.prototype.clearCache=function(){this.fixturesCache_={}},t.JSONFixtures.prototype.getFixtureData_=function(e){return this.fixturesCache_[e]||this.loadFixtureIntoCache_(e),this.fixturesCache_[e]},t.JSONFixtures.prototype.loadFixtureIntoCache_=function(e){var t=this,r=this.fixturesPath.match("/$")?this.fixturesPath+e:this.fixturesPath+"/"+e;$.ajax({async:!1,cache:!1,dataType:"json",url:r,success:function(r){t.fixturesCache_[e]=r},error:function(e,t,n){throw new Error("JSONFixture could not be loaded: "+r+" (status: "+t+", message: "+n.message+")")}})},t.JSONFixtures.prototype.proxyCallTo_=function(e,t){return this[e].apply(this,t)},t.jQuery=function(){},t.jQuery.browserTagCaseIndependentHtml=function(e){return $("<div/>").append(e).html()},t.jQuery.elementToString=function(e){return $(e).map(function(){return this.outerHTML}).toArray().join(", ")};var r={spiedEvents:{},handlers:[]};t.jQuery.events={spyOn:function(e,n){var o=function(o){r.spiedEvents[t.spiedEventsKey(e,n)]=t.util.argsToArray(arguments)};return $(e).on(n,o),r.handlers.push(o),{selector:e,eventName:n,handler:o,reset:function(){delete r.spiedEvents[t.spiedEventsKey(e,n)]}}},args:function(e,n){var o=r.spiedEvents[t.spiedEventsKey(e,n)];if(!o)throw"There is no spy for "+n+" on "+e.toString()+". Make sure to create a spy using spyOnEvent.";return o},wasTriggered:function(e,n){return!!r.spiedEvents[t.spiedEventsKey(e,n)]},wasTriggeredWith:function(e,r,n,o,s){var i=t.jQuery.events.args(e,r).slice(1);return"[object Array]"!==Object.prototype.toString.call(n)&&(i=i[0]),o.equals(n,i,s)},wasPrevented:function(e,n){var o=r.spiedEvents[t.spiedEventsKey(e,n)],s=o?o[0]:void 0;return s&&s.isDefaultPrevented()},wasStopped:function(e,n){var o=r.spiedEvents[t.spiedEventsKey(e,n)],s=o?o[0]:void 0;return s&&s.isPropagationStopped()},cleanUp:function(){r.spiedEvents={},r.handlers=[]}};var n=function(e,t){return void 0===t?void 0!==e:e===t};beforeEach(function(){t.addMatchers({toHaveClass:function(){return{compare:function(e,t){return{pass:$(e).hasClass(t)}}}},toHaveCss:function(){return{compare:function(e,t){for(var r in t){var n=t[r];if(("auto"!==n||"auto"!==$(e).get(0).style[r])&&$(e).css(r)!==n)return{pass:!1}}return{pass:!0}}}},toBeVisible:function(){return{compare:function(e){return{pass:$(e).is(":visible")}}}},toBeHidden:function(){return{compare:function(e){return{pass:$(e).is(":hidden")}}}},toBeSelected:function(){return{compare:function(e){return{pass:$(e).is(":selected")}}}},toBeChecked:function(){return{compare:function(e){return{pass:$(e).is(":checked")}}}},toBeEmpty:function(){return{compare:function(e){return{pass:$(e).is(":empty")}}}},toBeInDOM:function(){return{compare:function(e){return{pass:$.contains(document.documentElement,$(e)[0])}}}},toExist:function(){return{compare:function(e){return{pass:$(e).length}}}},toHaveLength:function(){return{compare:function(e,t){return{pass:$(e).length===t}}}},toHaveAttr:function(){return{compare:function(e,t,r){return{pass:n($(e).attr(t),r)}}}},toHaveProp:function(){return{compare:function(e,t,r){return{pass:n($(e).prop(t),r)}}}},toHaveId:function(){return{compare:function(e,t){return{pass:$(e).attr("id")==t}}}},toHaveHtml:function(){return{compare:function(e,r){return{pass:$(e).html()==t.jQuery.browserTagCaseIndependentHtml(r)}}}},toContainHtml:function(){return{compare:function(e,r){var n=$(e).html(),o=t.jQuery.browserTagCaseIndependentHtml(r);return{pass:n.indexOf(o)>=0}}}},toHaveText:function(){return{compare:function(e,t){var r=$.trim($(e).text());return t&&$.isFunction(t.test)?{pass:t.test(r)}:{pass:r==t}}}},toContainText:function(){return{compare:function(e,t){var r=$.trim($(e).text());return t&&$.isFunction(t.test)?{pass:t.test(r)}:{pass:-1!=r.indexOf(t)}}}},toHaveValue:function(){return{compare:function(e,t){return{pass:$(e).val()===t}}}},toHaveData:function(){return{compare:function(e,t,r){return{pass:n($(e).data(t),r)}}}},toContainElement:function(){return{compare:function(t,r){return e.debug,{pass:$(t).find(r).length}}}},toBeMatchedBy:function(){return{compare:function(e,t){return{pass:$(e).filter(t).length}}}},toBeDisabled:function(){return{compare:function(e,t){return{pass:$(e).is(":disabled")}}}},toBeFocused:function(e){return{compare:function(e,t){return{pass:$(e)[0]===$(e)[0].ownerDocument.activeElement}}}},toHandle:function(){return{compare:function(e,t){var r=$._data($(e).get(0),"events");if(!r||!t||"string"!=typeof t)return{pass:!1};var n=t.split("."),o=n.shift(),s=n.slice(0).sort(),i=new RegExp("(^|\\.)"+s.join("\\.(?:.*\\.)?")+"(\\.|$)");if(!r[o]||!n.length)return{pass:r[o]&&r[o].length>0};for(var a=0;a<r[o].length;a++){var u=r[o][a].namespace;if(i.test(u))return{pass:!0}}return{pass:!1}}}},toHandleWith:function(){return{compare:function(e,t,r){for(var n=t.split(".")[0],o=$._data($(e).get(0),"events")[n],s=0;s<o.length;s++)if(o[s].handler==r)return{pass:!0};return{pass:!1}}}},toHaveBeenTriggeredOn:function(){return{compare:function(e,r){var n={pass:t.jQuery.events.wasTriggered(r,e)};return n.message=n.pass?"Expected event "+$(e)+" not to have been triggered on "+r:"Expected event "+$(e)+" to have been triggered on "+r,n}}},toHaveBeenTriggered:function(){return{compare:function(e){var r=e.eventName,n=e.selector,o={pass:t.jQuery.events.wasTriggered(n,r)};return o.message=o.pass?"Expected event "+r+" not to have been triggered on "+n:"Expected event "+r+" to have been triggered on "+n,o}}},toHaveBeenTriggeredOnAndWith:function(e,r){return{compare:function(n,o,s){var i=t.jQuery.events.wasTriggered(o,n),a={pass:i&&t.jQuery.events.wasTriggeredWith(o,n,s,e,r)};if(i){var u=t.jQuery.events.args(o,n,s)[1];a.message=a.pass?"Expected event "+n+" not to have been triggered with "+t.pp(s)+" but it was triggered with "+t.pp(u):"Expected event "+n+" to have been triggered with "+t.pp(s)+"  but it was triggered with "+t.pp(u)}else a.message=a.pass?"Expected event "+n+" not to have been triggered on "+o:"Expected event "+n+" to have been triggered on "+o;return a}}},toHaveBeenPreventedOn:function(){return{compare:function(e,r){var n={pass:t.jQuery.events.wasPrevented(r,e)};return n.message=n.pass?"Expected event "+e+" not to have been prevented on "+r:"Expected event "+e+" to have been prevented on "+r,n}}},toHaveBeenPrevented:function(){return{compare:function(e){var r=e.eventName,n=e.selector,o={pass:t.jQuery.events.wasPrevented(n,r)};return o.message=o.pass?"Expected event "+r+" not to have been prevented on "+n:"Expected event "+r+" to have been prevented on "+n,o}}},toHaveBeenStoppedOn:function(){return{compare:function(e,r){var n={pass:t.jQuery.events.wasStopped(r,e)};return n.message=n.pass?"Expected event "+e+" not to have been stopped on "+r:"Expected event "+e+" to have been stopped on "+r,n}}},toHaveBeenStopped:function(){return{compare:function(e){var r=e.eventName,n=e.selector,o={pass:t.jQuery.events.wasStopped(n,r)};return o.message=o.pass?"Expected event "+r+" not to have been stopped on "+n:"Expected event "+r+" to have been stopped on "+n,o}}}}),t.getEnv().addCustomEqualityTester(function(e,r){if(e&&r){if(e instanceof $||t.isDomNode(e)){var n=$(e);return r instanceof $?n.length==r.length&&e.is(r):n.is(r)}if(r instanceof $||t.isDomNode(r)){var o=$(r);return e instanceof jQuery?e.length==o.length&&o.is(e):$(r).is(e)}}}),t.getEnv().addCustomEqualityTester(function(e,t){if(e instanceof jQuery&&t instanceof jQuery&&e.size()==t.size())return e.is(t)})}),afterEach(function(){t.getFixtures().cleanUp(),t.getStyleFixtures().cleanUp(),t.jQuery.events.cleanUp()}),e.readFixtures=function(){return t.getFixtures().proxyCallTo_("read",arguments)},e.preloadFixtures=function(){t.getFixtures().proxyCallTo_("preload",arguments)},e.loadFixtures=function(){t.getFixtures().proxyCallTo_("load",arguments)},e.appendLoadFixtures=function(){t.getFixtures().proxyCallTo_("appendLoad",arguments)},e.setFixtures=function(e){return t.getFixtures().proxyCallTo_("set",arguments)},e.appendSetFixtures=function(){t.getFixtures().proxyCallTo_("appendSet",arguments)},e.sandbox=function(e){return t.getFixtures().sandbox(e)},e.spyOnEvent=function(e,r){return t.jQuery.events.spyOn(e,r)},e.preloadStyleFixtures=function(){t.getStyleFixtures().proxyCallTo_("preload",arguments)},e.loadStyleFixtures=function(){t.getStyleFixtures().proxyCallTo_("load",arguments)},e.appendLoadStyleFixtures=function(){t.getStyleFixtures().proxyCallTo_("appendLoad",arguments)},e.setStyleFixtures=function(e){t.getStyleFixtures().proxyCallTo_("set",arguments)},e.appendSetStyleFixtures=function(e){t.getStyleFixtures().proxyCallTo_("appendSet",arguments)},e.loadJSONFixtures=function(){return t.getJSONFixtures().proxyCallTo_("load",arguments)},e.getJSONFixture=function(e){return t.getJSONFixtures().proxyCallTo_("read",arguments)[e]}}(window,window.jasmine,window.jQuery);